{% extends 'base.html' %}
{% load static %}
{% load video_tags %} -

{% block content%}

<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            
                <h1 style="font-weight: 600;">Open Positions  </h1>
                <h2 style="color: #c71782; font-weight: 300;">Join Our Team, Transform Lives</h2>
                
        </div>
        <div class="row justify-content-center">
            
            <h6>Not finding the right job openings ?<span style="color:#0072BC;font-weight:1000;margin-left:10px;"><a href="#apply-now">Click Here</a></span> to share your resume with us.</h6>
                
        </div>
        
    </div>
</section>

  <!--Search box-->
<!-- Your main HTML file (e.g., caritasapp/templates/caritasapp/your_main_template.html) -->

<div class="container ">
    <div class="row justify-content-center" style="width:90%;">
        <div class="col-md-2" style="width: 13%;">
            <h5 style="font-weight:600;">Search for <br/>Jobs</h5>
        </div>
        <div class="col-md-10">
            <div class="input-group custom-input-group ">
                
                <form method="get" action="{% url 'search_jobs' %}" style="width:100%;">
                   <div class="input-group rounded-search" style=" border-radius: 25px;box-shadow:0px 0px 4px 0px rgba(0,0,0,0.25); overflow: hidden;">
                        <span class="input-group-btn">
                            <button type="submit" class="btn search-btn" data-target="#search-form" name="q" style="border-top-left-radius: 20px;
                    border-bottom-left-radius: 20px;">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                        <input type="text" name="search" class="form-control search-form" placeholder="Search..." style="border-top-right-radius: 20px;
                    border-bottom-right-radius: 20px;">
                    </div>
                    
                </form>
            </div>
        </div>
    </div>

    {% if job_titles %}
        
        <p>Results for: {{ query }}</p>
       
            {% for career in job_titles %}
                <div class="col-lg-12 col-md-12 col-sm-12 mb-4 ">
                    <div class="d-flex align-items-center">
                        <div class="mr-5" style="width: 70%;">
                            <p><b>{{career.job_title}}</b></p>
                        </div>
                        <div class="mx-4 " style="width: 20%;">
                            <p>{{career.job_type}}</p>
                            
                        </div>
                        <div class="ml-auto align-self-start " style="margin-left: 10%;width:6%;"><a href="{% url 'job_detail' career_id=career.id %}">
                            <i class='bi bi-arrow-right-circle' style="font-size:35px;color:#C71782;"></i></a>
                        </div>
                    </div>
                    <br/>
                    <hr style="width: 98%;margin:0 ;border:1px solid #C71782;opacity:100%;">
                </div>
            {% endfor %}
        
    {% endif %}
</div>

    
    <!--End of search box-->
<section>
    <div class="container mt-5">
    <div class="row justify-content-center" style="margin:0 auto;">
       <div style="display: flex; align-items: center;width:90%;">
           
            <label for="jobFilter" style="margin-right: 10px;">Filter by Jobs:</label>
            <form id="jobFilterForm">
                <label class="px-3"><input type="checkbox" name="category" value="All Jobs"> All Jobs</label>
                {% for job_type in job_types %}
                    <label class="px-3"><input type="checkbox" name="category" value="{{ job_type }}"> {{ job_type }}</label>
                {% endfor %}
            </form>
        </div>

        <div id="filteredResults">
            <!-- Filtered job results will be displayed here -->
        </div>

    </div>

    </div>
</section>
<section>
    <div class="container">
        <div class="row justify-content-center" style="margin:0 auto;width:90%" >
            {% for career in careers %}
                <div class="col-lg-12 col-md-12 col-sm-12 mb-4 ">
                    <div class="d-flex align-items-center">
                        <div class="mr-5" style="width: 70%;">
                            <p><b>{{career.job_title}}</b></p>
                        </div>
                        <div class="mx-4 " style="width: 20%;">
                            <p>{{career.job_type}}</p>
                        </div>
                        <div class="ml-auto align-self-start " style="margin-left: 10%;width:6%;"><a href="{% url 'job_detail' career_id=career.id %}">
                            <i class='bi bi-arrow-right-circle' style="font-size:35px;color:#C71782;"></i></a>
                        </div>
                    </div>
                    <br/>
                    <hr style="width: 98%;margin:0 ;border:1px solid #C71782;opacity:100%;">
                </div>
            {% empty %}
                <span style="color:#C71782;text-align:center;">No jobs available. Please check again later. </span>
            {% endfor %}
        </div>
    </div>
</section>
 
<section id="apply-now">
    <div class="container">
        <div class="row justify-content-center" style="width: 60%;">
            <div class="col-lg-10 col-md-10 col-sm-10 mb-4">
                <h4 style="font-weight:600;">Not finding the right job openings ? </h4>
                <h6 style="font-weight:200;">Share you resume with us, and we'll contact you when a <br>matching opportunity aligns with your skills and experience.</h6>
                <p>&nbsp;</p>
                <form action=" " method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="secondopinion row mb-2">
                        <div class="col-sm-12 ">
                           
                            <input type="text" id="first_name" name="first_name" class="form-control" maxlength="30" pattern="^[A-Za-z\s]{1,}[\.]{0,1}[A-Za-z\s]{0,}$" required placeholder="First name" autocomplete="given-name">  <span class="required-symbol-book">*</span>
                           
                        </div>
                        <div class="col-sm-12 ">
                            <input type="text" id="last_name" name="last_name" class="form-control" maxlength="30" pattern="^[A-Za-z\s]{1,}[\.]{0,1}[A-Za-z\s]{0,}$" required placeholder="Last name">  <span class="required-symbol-book">*</span>
                        </div>
                    </div>
                    <div class="secondopinion row mb-2">
                        <div class="col-sm-12 ">
                            <input type="email" id="email" name="email" class="form-control" required pattern="^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$" placeholder="Email" autocomplete="given-name">  <span class="required-symbol-book">*</span>
                        </div>
                        <div class="col-sm-12">
                            <input type="tel" id="phone_number" name="phone_number" class="form-control" pattern="[0-9]{10}" required placeholder="Phone">  <span class="required-symbol-book">*</span>
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-12">
                            <input required  id="upload" name = "resume" accept=".pdf, .docx, .doc," type="file" />
                            <img src="{% static 'img/attach-file 1.png' %}" /><span style="color:#0072BC;font-weight:1000;margin-left:10px;"> <a href="" id="upload_link">Upload Your Resume</a><span class="required-symbol-book">*</span></span>
                           
                            <br/><br/>
                            <p>Allowed Type(s): pdf, doc, and docx.</p>
                            <script>
                                $(function(){
                                    $("#upload_link").on('click', function(e){
                                        e.preventDefault();
                                        $("#upload:hidden").trigger('click');
                                    });
                                });
                            </script>
                            <style>
                                #upload_link{
                                    text-decoration:none;
                                }
                                #upload{
                                    display:none
                                }
                            </style>
                           
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-sm-12">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="tickbox" name="agree_terms" required>
                                <label class="form-check-label" for="tickbox">
                                    By ticking, I agree to the <a href="{% url 'terms_conditions' %}"><u>Terms and Conditions</u></a>, and I am giving my consent to receive updates through email and SMS.
                                </label>
                            </div>
                        </div>
                    </div>
                    <p>&nbsp;</p>
                    <button type="submit" class="enqrybtn">Upload Resume</button>
                </form>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-2 mb-4">
                <img src = "{% static 'img/dr_img.jpg' %}" >
            </div>
        </div>
    </div>
</section>
<script>
    $(document).ready(function() {
        // Array to store selected categories
        var selectedCategories = [];

        // Event handler for checkbox change
        $('#jobFilterForm input[type="checkbox"]').change(function() {
            // Get all checked checkboxes
            var checkedCheckboxes = $('#jobFilterForm input[type="checkbox"]:checked');

            // Update the selected categories array
            selectedCategories = checkedCheckboxes.map(function() {
                return $(this).val();
            }).get();

            // Show or hide job items based on the selected categories
            if (selectedCategories.length === 0 || selectedCategories.includes('All Jobs')) {
                $('.col-lg-12.col-md-12.col-sm-12.mb-4').show();
            } else {
                $('.col-lg-12.col-md-12.col-sm-12.mb-4').hide();
                selectedCategories.forEach(function(category) {
                    $('.col-lg-12.col-md-12.col-sm-12.mb-4:has(p:contains("' + category + '"))').show();
                });
            }
        });
    });
</script>



{% endblock%}